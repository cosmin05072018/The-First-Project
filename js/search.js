const productsSearchBar = [

    //for women
    {
        collection: "women",
        name: "Rochie 'Gemma'",
        price: 90,
        inCart: 0,
        imgSourceName: "cart1" 
    },
    {
        collection: "women",
        name: "Rochie 'Whitney'",
        price: 50,
        inCart: 0,
        imgSourceName: "cart2" 
    },
    {
        collection: "women",
        name: "Rochie 'Sloane'",
        price: 30,
        inCart: 0,
        imgSourceName: "cart3" 
    },
    {
        collection: "women",
        name: "Rochie 'ALIANNA'",
        price: 30,
        inCart: 0,
        imgSourceName: "cart4" 
    },
    {
        collection: "women",
        name: "Rochie tip bluză 'SANIA'",
        price: 43,
        inCart: 0,
        imgSourceName: "cart5" 
    },
    {
        collection: "women",
        name: "Rochie 'EIRA'",
        price: 33,
        inCart: 0,
        imgSourceName: "cart6" 
    },
    {
        collection: "women",
        name: "Jeans",
        price: 20,
        inCart: 0,
        imgSourceName: "cart7" 
    },
    {
        collection: "women",
        name: "Pantaloni 'FRANCIS'",
        price: 15,
        inCart: 0,
        imgSourceName: "cart8" 
    },
    {
        collection: "women",
        name: "Jeans 'Mom 80'",
        price: 47,
        inCart: 0,
        imgSourceName: "cart9" 
    },
    {
        collection: "women",
        name: "Bluză 'Kendra'",
        price: 44,
        inCart: 0,
        imgSourceName: "cart10" 
    },
    {
        collection: "women",
        name: "Bluză 'Kendra'",
        price: 18,
        inCart: 0,
        imgSourceName: "cart11" 
    },
    {
        collection: "women",
        name: "Tricou 'Katja'",
        price: 76,
        inCart: 0,
        imgSourceName: "cart12"
    },

    //for men

    {
        collection: "men",
        name: "Jachetă fleece 'WILLI'",
        price: 20,
        inCart: 0,
        imgSourceName: "cart13"
    },
    {
        collection: "men",
        name: "Tricou negru",
        price: 13,
        inCart: 0,
        imgSourceName: "cart14" 
    },
    {
        collection: "men",
        name: "Tricou 'BORO'",
        price: 26,
        inCart: 0,
        imgSourceName: "cart15" 
    },
    {
        collection: "men",
        name: "Jeans 'Ply'",
        price: 33,
        inCart: 0,
        imgSourceName: "cart16" 
    },
    {
        collection: "men",
        name: "Cămașă 'JPRBLASUMMER'",
        price: 30,
        inCart: 0,
        imgSourceName: "cart17" 
    },
    {
        collection: "men",
        name: "Camasa de vara",
        price: 18,
        inCart: 0,
        imgSourceName: "cart18" 
    },
    {
        collection: "men",
        name: "Tricou 'Carl'",
        price: 15,
        inCart: 0,
        imgSourceName: "cart19" 
    },
    {
        collection: "men",
        name: "Tricou Kan",
        price: 14,
        inCart: 0,
        imgSourceName: "cart20" 
    },
    {
        collection: "men",
        name: "Hanorac 'JJEHOLMEN'",
        price: 20,
        inCart: 0,
        imgSourceName: "cart21"  
    },
    {
        collection: "men",
        name: "Hanorac",
        price: 26,
        inCart: 0,
        imgSourceName: "cart22"  
    },
    {
        collection: "men",
        name: "Camasa king",
        price: 14,
        inCart: 0,
        imgSourceName: "cart23"  
    },
    {
        collection: "men",
        name: "Tricou black",
        price: 10,
        inCart: 0,
        imgSourceName: "cart24"  
    },

    //for kids
    {
        collection: "Kids",
        name: "Bluză de molton 'Black Cat'",
        price: 12,
        inCart: 0,
        imgSourceName: "cart25"  
    },
    {
        collection: "Kids",
        name: "Geacă de primăvară-toamnă",
        price: 39,
        inCart: 0,
        imgSourceName: "cart26"  
    },
    {
        collection: "Kids",
        name: "Hanorac",
        price: 22,
        inCart: 0,
        imgSourceName: "cart27"  
    },
    {
        collection: "Kids",
        name: "Hanorac 'Club'",
        price: 30,
        inCart: 0,
        imgSourceName: "cart28"  
    },
    {
        collection: "Kids",
        name: "Tricou 'Futura'",
        price: 43,
        inCart: 0,
        imgSourceName: "cart29"  
    },
    {
        collection: "Kids",
        name: "Tricou ' JUMBO FUTURA TEE'",
        price: 15,
        inCart: 0,
        imgSourceName: "cart30"  
    },
    {
        collection: "Kids",
        name: "Pantaloni nike",
        price: 14,
        inCart: 0,
        imgSourceName: "cart31"   
    },
    {
        collection: "Kids",
        name: "Pantaloni negri",
        price: 13,
        inCart: 0,
        imgSourceName: "cart32"   
    },
    {
        collection: "Kids",
        name: "Pantaloni gri",
        price: 18,
        inCart: 0,
        imgSourceName: "cart33"   
    },
    {
        collection: "Kids",
        name: "Pantaloni sport",
        price: 12,
        inCart: 0,
        imgSourceName: "cart34"   
    },
    {
        collection: "Kids",
        name: "Șorturi de baie",
        price: 10,
        inCart: 0,
        imgSourceName: "cart35"   
    },
    {
        collection: "Kids",
        name: "Tricou",
        price: 11,
        inCart: 0,
        imgSourceName: "cart36"  
    },


    //for accessories
    {
        collection: "accessories",
        name: "Ochelari de soare",
        price: 10,
        inCart: 0,
        imgSourceName: "cart37"   
    },
    {
        collection: "accessories",
        name: "Rucsac",
        price: 14,
        inCart: 0,
        imgSourceName: "cart38"   
    },
    {
        collection: "accessories",
        name: "Geantă",
        price: 16,
        inCart: 0,
        imgSourceName: "cart39"   
    },
    {
        collection: "accessories",
        name: "Sneaker 'Gazelle'",
        price: 15,
        inCart: 0,
        imgSourceName: "cart40"   
    },
    {
        collection: "accessories",
        name: "Geantă CALVIN KLEIN",
        price: 11,
        inCart: 0,
        imgSourceName: "cart41"  
    },
    {
        collection: "accessories",
        name: "Geantă cK",
        price: 14,
        inCart: 0,
        imgSourceName: "cart42"  
    },
    {
        collection: "accessories",
        name: "Fular gri",
        price: 18,
        inCart: 0,
        imgSourceName: "cart43"  
    },
    {
        collection: "accessories",
        name: "Fular",
        price: 17,
        inCart: 0,
        imgSourceName: "cart44"  
    },
    {
        collection: "accessories",
        name: "Căciuli sport 'Walden'",
        price: 24,
        inCart: 0,
        imgSourceName: "cart45"  
    },
    {
        collection: "accessories",
        name: "Mănuși sport 'Grommitt Mittens'",
        price: 20,
        inCart: 0,
        imgSourceName: "cart46"  
    },
    {
        collection: "accessories",
        name: "Căciulă",
        price: 16,
        inCart: 0,
        imgSourceName: "cart47"  
    },
    {
        collection: "accessories",
        name: "Pălărie 'COTTON-CLSC CAP-AC-HAT'",
        price: 11,
        inCart: 0,
        imgSourceName: "cart48"  
    }
]

const list = document.getElementById('list')

function setList(group){
    clearList();
    for(person of group){
        const item = document.createElement('li');
        item.classList.add('list-group-item');
        const text = document.createTextNode(person.name);
        item.appendChild(text);
        list.appendChild(item);
    }
    if(group.length === 0){
        setNotResults()
    }
}

function clearList(){
    while(list.firstChild){
        list.removeChild(list.firstChild);
    }
}

function setNotResults(){
    const item = document.createElement('li');
    item.classList.add('list-group-item');
    const text = document.createTextNode('No results found');
    item.appendChild(text);
    list.appendChild(item);
}

function getRelevancy (value, searchTerm){
    if(value === searchTerm ) {
        return 2;
    } else if (value.startsWith(searchTerm)){
        return 1;
    } else if(value.includes(searchTerm)){
        return 0;
    }
}

const searchInput =document.getElementById('search');

searchInput.addEventListener('input', (event) =>{
    let value = event.target.value;
    document.getElementById('list').style.color = "#383838";
    document.getElementById('list').style.backgroundColor = "#fff";
    document.getElementById('list').style.listStyle = "none";
    document.getElementById('list').style.width = "500px";
    document.getElementById('list').style.position = "absolute";
    document.getElementById('list').style.marginTop = "40px";
    document.getElementById('list').style.padding = "10px";
    document.getElementById('list').style.display = "block";

    if(value && value.trim().length > 0){
        value = value.trim().toLowerCase();
        setList(productsSearchBar.filter(person => {
            return person.name.toLowerCase().startsWith(value);
        }).sort((personA, personB) => {
            return getRelevancy(personB.name, value) - getRelevancy(personA.name, value);
        }));
    } else{
        clearList();
    }
})


